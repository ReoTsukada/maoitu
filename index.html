<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>魔王様！！いつまでよければいいですか！？</title>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SZPVXMX85G"></script>
<script>
const GA_MEASUREMENT_ID = 'G-SZPVXMX85G';
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', GA_MEASUREMENT_ID);
</script>

<!-- ▼ OGP / Twitterカード -->
<meta property="og:title" content="魔王様！！いつまでよければいいですか！？">
<meta property="og:description" content="避けゲーアクション！皆もやってみてね！">
<meta property="og:type" content="website">
<meta property="og:url" content="https://reotsukada.github.io/maoitu/">
<meta property="og:image" content="https://reotsukada.github.io/maoitu/ogp.png">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@ARTa_PIXELART">

<style>
body {
  margin:0;
  background:#000;
  height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:20px;
  color:#fff;
  font-family:sans-serif;
}
h1 { font-size:20px;text-align:center; }
button {
  font:700 16px system-ui;
  padding:10px 20px;
  border:0;
  border-radius:12px;
  cursor:pointer;
}
a { color:#7dd3fc; }
.primary-controls {
  display:flex;
  align-items:center;
  gap:16px;
}
.instructions-card {
  max-width:320px;
  padding:16px 20px;
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.15);
  border-radius:16px;
  color:#f3f4f6;
  font-size:14px;
  line-height:1.6;
  text-align:left;
}
.instructions-card h2 {
  margin:0 0 8px;
  font-size:16px;
  color:#fff;
}
.instructions-card ul {
  margin:0;
  padding-left:18px;
}
.instructions-card li {
  margin-bottom:6px;
}
.switch {
  position:relative;
  display:inline-block;
  width:48px;
  height:26px;
}
.switch input { opacity:0; width:0; height:0; }
.slider {
  position:absolute;
  inset:0;
  background:#4b5563;
  border-radius:20px;
  transition:0.2s;
}
.slider:before {
  content:"";
  position:absolute;
  height:20px;
  width:20px;
  left:3px;
  top:3px;
  background:#fff;
  border-radius:50%;
  transition:0.2s;
}
.switch input:checked + .slider { background:#22c55e; }
.switch input:checked + .slider:before { transform:translateX(22px); }
.volume-label {
  font-size:14px;
  color:#ccc;
}
</style>
</head>
<body>

<!-- 開発者表記 -->
<div style="position:absolute;top:10px;left:0;right:0;text-align:center;font-size:14px;color:#ccc;">
  開発者: <a href="https://x.com/ARTa_PIXELART" target="_blank" style="color:#1DA1F2;text-decoration:none;">@ARTa_PIXELART</a>
</div>

<h1>魔王様！！いつまでよければいいですか！？</h1>

<!-- プレイボタン + 音量スイッチ -->
<div class="primary-controls">
  <button id="playBtn" style="font-size:18px;padding:14px 24px;">▶ プレイ</button>
  <div style="display:flex;flex-direction:column;gap:4px;align-items:flex-start;">
    <label class="switch">
      <input type="checkbox" id="audioToggle">
      <span class="slider"></span>
    </label>
    <span id="audioToggleLabel" class="volume-label"></span>
  </div>
</div>

<!-- シェアボタン -->
<button id="shareBtn" style="background:#22c55e;color:#000;">シェアする</button>

<div class="instructions-card">
  <h2>遊び方</h2>
  <ul>
    <li>操作：画面をタップ / マウスドラッグ、または ←→ キーで移動します。</li>
    <li>敵にぶつかると即ゲームオーバーです。</li>
    <li>エンジェリンを取ると一度だけ身代わりが発動し、次の衝突を防ぎます。</li>
  </ul>
</div>

<script>
const GAME_URL = "game.html"; // ← 修正済み
const AUDIO_KEY = "maoitu_audio";
const shareBtn = document.getElementById("shareBtn");

// 投稿文（スコア無し・#PiXiEED 付き・最後に公開リンク）
function shareText() {
  return `開発者:@ARTa_PIXELART　\n『魔王様！！いつまでよければいいですか！？』\n皆もやってみてね！！！\n\nリンクから遊べるよ！！#PiXiEED\n\nhttps://reotsukada.github.io/maoitu/`;
}

shareBtn.addEventListener("click", async () => {
  const text = shareText();
  try{
    await navigator.clipboard.writeText(text);
    alert("シェア用テキストをコピーしました！");
  }catch(err){
    alert("クリップボードへのコピーに失敗しました。手動で共有してください。");
  }
});

// プレイボタン動作
document.getElementById("playBtn").onclick = () => {
  location.href = GAME_URL;
};

// 音量トグル
const audioToggle = document.getElementById("audioToggle");
const audioToggleLabel = document.getElementById("audioToggleLabel");

function updateAudioLabel() {
  audioToggleLabel.textContent = audioToggle.checked ? "音量 ON" : "音量 OFF";
}

const storedAudio = localStorage.getItem(AUDIO_KEY);
audioToggle.checked = storedAudio !== "off";
updateAudioLabel();

audioToggle.addEventListener("change", () => {
  localStorage.setItem(AUDIO_KEY, audioToggle.checked ? "on" : "off");
  updateAudioLabel();
});
</script>

</body>
</html>
